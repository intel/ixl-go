<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# compress

```go
import "github.com/intel/ixl-go/compress"
```

Package compress provides hardware compression ability \(IAA\).

<details><summary>Example</summary>
<p>



```go
package main

import (
	"bytes"
	"crypto/rand"
	"io"
	"log"

	"github.com/intel/ixl-go/compress"
)

func main() {
	input := make([]byte, 1024)
	_, _ = rand.Read(input)
	var w io.WriteCloser
	d, err := compress.NewDeflate(bytes.NewBuffer(nil))
	if err != nil {
		// IAA devices not found
		log.Fatalln(err)
	}
	w = compress.NewWriter(d)
	_, _ = w.Write(input)
	_ = w.Close()
}
```

</p>
</details>

## Index

- [func Ready\(\) bool](<#Ready>)
- [type BufWriter](<#BufWriter>)
  - [func NewDeflateWriter\(w io.Writer, opts ...Option\) \(\*BufWriter, error\)](<#NewDeflateWriter>)
  - [func NewGzipWriter\(w io.Writer, opts ...Option\) \*BufWriter](<#NewGzipWriter>)
  - [func NewWriter\(bw blockWriter\) \*BufWriter](<#NewWriter>)
  - [func \(w \*BufWriter\) Close\(\) error](<#BufWriter.Close>)
  - [func \(w \*BufWriter\) Flush\(\) error](<#BufWriter.Flush>)
  - [func \(w \*BufWriter\) Reset\(writer io.Writer\)](<#BufWriter.Reset>)
  - [func \(w \*BufWriter\) Write\(data \[\]byte\) \(n int, err error\)](<#BufWriter.Write>)
- [type Deflate](<#Deflate>)
  - [func NewDeflate\(w io.Writer, opts ...Option\) \(\*Deflate, error\)](<#NewDeflate>)
  - [func \(d \*Deflate\) Close\(\) error](<#Deflate.Close>)
  - [func \(d \*Deflate\) ReadFrom\(r io.Reader\) \(total int64, err error\)](<#Deflate.ReadFrom>)
  - [func \(d \*Deflate\) Reset\(w io.Writer\)](<#Deflate.Reset>)
- [type Gzip](<#Gzip>)
  - [func NewGzip\(w io.Writer, opts ...Option\) \*Gzip](<#NewGzip>)
  - [func \(g \*Gzip\) Close\(\) error](<#Gzip.Close>)
  - [func \(g \*Gzip\) ReadFrom\(reader io.Reader\) \(n int64, err error\)](<#Gzip.ReadFrom>)
  - [func \(g \*Gzip\) Reset\(w io.Writer\)](<#Gzip.Reset>)
- [type Header](<#Header>)
- [type Inflate](<#Inflate>)
  - [func NewInflate\(r io.Reader, opts ...Option\) \(\*Inflate, error\)](<#NewInflate>)
  - [func NewInflateWithBufferSize\(r io.Reader, bufferSize int, opts ...Option\) \(\*Inflate, error\)](<#NewInflateWithBufferSize>)
  - [func \(i \*Inflate\) DecompressAll\(compressed \[\]byte, raw \[\]byte\) \(int, error\)](<#Inflate.DecompressAll>)
  - [func \(i \*Inflate\) Read\(data \[\]byte\) \(n int, err error\)](<#Inflate.Read>)
  - [func \(i \*Inflate\) Reset\(r io.Reader\)](<#Inflate.Reset>)
- [type Option](<#Option>)
  - [func BusyPoll\(\) Option](<#BusyPoll>)
  - [func DynamicMode\(\) Option](<#DynamicMode>)
  - [func FixedMode\(\) Option](<#FixedMode>)
  - [func HuffmanOnly\(\) Option](<#HuffmanOnly>)


<a name="Ready"></a>
## func [Ready](<https://github.com/intel/ixl-go/blob/main/compress/ctx.go#L11>)

```go
func Ready() bool
```

Ready checks if the hardware is usable.

<a name="BufWriter"></a>
## type [BufWriter](<https://github.com/intel/ixl-go/blob/main/compress/writer.go#L15-L19>)

BufWriter is a buffer writer for wrapping Deflate/Gzip as a io.Writer.

```go
type BufWriter struct {
    // contains filtered or unexported fields
}
```

<a name="NewDeflateWriter"></a>
### func [NewDeflateWriter](<https://github.com/intel/ixl-go/blob/main/compress/writer.go#L88>)

```go
func NewDeflateWriter(w io.Writer, opts ...Option) (*BufWriter, error)
```

NewDeflateWriter create a deflate writer

<a name="NewGzipWriter"></a>
### func [NewGzipWriter](<https://github.com/intel/ixl-go/blob/main/compress/writer.go#L97>)

```go
func NewGzipWriter(w io.Writer, opts ...Option) *BufWriter
```

NewGzipWriter create a gzip writer

<a name="NewWriter"></a>
### func [NewWriter](<https://github.com/intel/ixl-go/blob/main/compress/writer.go#L29>)

```go
func NewWriter(bw blockWriter) *BufWriter
```

NewWriter create a new BufWriter. The argument should be Gzip or Deflate.

<a name="BufWriter.Close"></a>
### func \(\*BufWriter\) [Close](<https://github.com/intel/ixl-go/blob/main/compress/writer.go#L74>)

```go
func (w *BufWriter) Close() error
```

Close flush all buffered data to underlying block writer and close it.

<a name="BufWriter.Flush"></a>
### func \(\*BufWriter\) [Flush](<https://github.com/intel/ixl-go/blob/main/compress/writer.go#L67>)

```go
func (w *BufWriter) Flush() error
```

Flush immediately write all buffered data to underlying block writer.

<a name="BufWriter.Reset"></a>
### func \(\*BufWriter\) [Reset](<https://github.com/intel/ixl-go/blob/main/compress/writer.go#L37>)

```go
func (w *BufWriter) Reset(writer io.Writer)
```

Reset writer.

<a name="BufWriter.Write"></a>
### func \(\*BufWriter\) [Write](<https://github.com/intel/ixl-go/blob/main/compress/writer.go#L43>)

```go
func (w *BufWriter) Write(data []byte) (n int, err error)
```

Write data to underlying block writer.

<a name="Deflate"></a>
## type [Deflate](<https://github.com/intel/ixl-go/blob/main/compress/deflate.go#L39-L63>)

Deflate takes data written to it and writes the deflate compressed form of that data to an underlying writer \(see NewDeflate\).

Notice:

1. the history buffer used by hardware is 4KB.
2. the \`Deflate\` object should be reused as much as possible to reduce the GC overhead.

```go
type Deflate struct {
    // contains filtered or unexported fields
}
```

<a name="NewDeflate"></a>
### func [NewDeflate](<https://github.com/intel/ixl-go/blob/main/compress/deflate.go#L105>)

```go
func NewDeflate(w io.Writer, opts ...Option) (*Deflate, error)
```

NewDeflate returns a new Deflate writing compressed data to underlying writer \`w\`.

<a name="Deflate.Close"></a>
### func \(\*Deflate\) [Close](<https://github.com/intel/ixl-go/blob/main/compress/deflate.go#L431>)

```go
func (d *Deflate) Close() error
```

Close the underlying writer.

<a name="Deflate.ReadFrom"></a>
### func \(\*Deflate\) [ReadFrom](<https://github.com/intel/ixl-go/blob/main/compress/deflate.go#L159>)

```go
func (d *Deflate) ReadFrom(r io.Reader) (total int64, err error)
```

ReadFrom reads all data from \`r\` and compresses the data and then writes compressed data into underlying writer \`w\`.

<a name="Deflate.Reset"></a>
### func \(\*Deflate\) [Reset](<https://github.com/intel/ixl-go/blob/main/compress/deflate.go#L148>)

```go
func (d *Deflate) Reset(w io.Writer)
```

Reset the \`Deflate\` object.

<a name="Gzip"></a>
## type [Gzip](<https://github.com/intel/ixl-go/blob/main/compress/gzip.go#L19-L29>)

Gzip is an object to hold the state for compress data using gzip format.

```go
type Gzip struct {
    Header
    UTF8 bool // can be used with gzip command
    // contains filtered or unexported fields
}
```

<a name="NewGzip"></a>
### func [NewGzip](<https://github.com/intel/ixl-go/blob/main/compress/gzip.go#L34>)

```go
func NewGzip(w io.Writer, opts ...Option) *Gzip
```

NewGzip create a new Gzip.

<a name="Gzip.Close"></a>
### func \(\*Gzip\) [Close](<https://github.com/intel/ixl-go/blob/main/compress/gzip.go#L220>)

```go
func (g *Gzip) Close() error
```

Close the writer.

<a name="Gzip.ReadFrom"></a>
### func \(\*Gzip\) [ReadFrom](<https://github.com/intel/ixl-go/blob/main/compress/gzip.go#L178>)

```go
func (g *Gzip) ReadFrom(reader io.Reader) (n int64, err error)
```

ReadFrom reads all data from \`r\` and compresses the data and then writes compressed data into underlying writer \`w\`.

<a name="Gzip.Reset"></a>
### func \(\*Gzip\) [Reset](<https://github.com/intel/ixl-go/blob/main/compress/gzip.go#L209>)

```go
func (g *Gzip) Reset(w io.Writer)
```

Reset the internal states for reusing the object.

<a name="Header"></a>
## type [Header](<https://github.com/intel/ixl-go/blob/main/compress/gzip.go#L16>)

Header is same as gzip.Header

```go
type Header = gzip.Header
```

<a name="Inflate"></a>
## type [Inflate](<https://github.com/intel/ixl-go/blob/main/compress/inflate.go#L23-L36>)

Inflate reads data from reader r and decompresses them.

Notice: the compressed data must be compressed by IAA or the whole stream must not larger than 4KB. This because the standard deflate's history buffer size is 32KB, but the IAA deflate's history buffer size is 4KB.

```go
type Inflate struct {
    // contains filtered or unexported fields
}
```

<a name="NewInflate"></a>
### func [NewInflate](<https://github.com/intel/ixl-go/blob/main/compress/inflate.go#L39>)

```go
func NewInflate(r io.Reader, opts ...Option) (*Inflate, error)
```

NewInflate creates a new Inflate with 4KB buffer size to decompress data from reader r.

<a name="NewInflateWithBufferSize"></a>
### func [NewInflateWithBufferSize](<https://github.com/intel/ixl-go/blob/main/compress/inflate.go#L50>)

```go
func NewInflateWithBufferSize(r io.Reader, bufferSize int, opts ...Option) (*Inflate, error)
```

NewInflateWithBufferSize creates a new Inflate with specified buffer size to decompress data from reader r.

<a name="Inflate.DecompressAll"></a>
### func \(\*Inflate\) [DecompressAll](<https://github.com/intel/ixl-go/blob/main/compress/inflate.go#L91>)

```go
func (i *Inflate) DecompressAll(compressed []byte, raw []byte) (int, error)
```

DecompressAll decompress all compressed data and write result into raw. The caller should make sure that \`raw\` has enough space.

<a name="Inflate.Read"></a>
### func \(\*Inflate\) [Read](<https://github.com/intel/ixl-go/blob/main/compress/inflate.go#L106>)

```go
func (i *Inflate) Read(data []byte) (n int, err error)
```

Read decompressed data from the underlying compressed reader.

<a name="Inflate.Reset"></a>
### func \(\*Inflate\) [Reset](<https://github.com/intel/ixl-go/blob/main/compress/inflate.go#L72>)

```go
func (i *Inflate) Reset(r io.Reader)
```

Reset reset the Inflate object

<a name="Option"></a>
## type [Option](<https://github.com/intel/ixl-go/blob/main/compress/deflate.go#L73>)

Option type is used to configure how the library handles your compression or decompression.

```go
type Option func(opt *option)
```

<a name="BusyPoll"></a>
### func [BusyPoll](<https://github.com/intel/ixl-go/blob/main/compress/deflate.go#L98>)

```go
func BusyPoll() Option
```

BusyPoll enable busy\-poll mode to reduce the deflate latency. Beware it may cause more CPU cost.

<a name="DynamicMode"></a>
### func [DynamicMode](<https://github.com/intel/ixl-go/blob/main/compress/deflate.go#L83>)

```go
func DynamicMode() Option
```

DynamicMode enable dynamic mode to compress the data.

<a name="FixedMode"></a>
### func [FixedMode](<https://github.com/intel/ixl-go/blob/main/compress/deflate.go#L76>)

```go
func FixedMode() Option
```

FixedMode enable fixed mode to compress the data.

<a name="HuffmanOnly"></a>
### func [HuffmanOnly](<https://github.com/intel/ixl-go/blob/main/compress/deflate.go#L90>)

```go
func HuffmanOnly() Option
```

HuffmanOnly enable huffman code only mode to compress the data.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
